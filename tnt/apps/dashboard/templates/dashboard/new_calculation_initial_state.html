<!-- Initial state specification -->
<div id="new_calculation_initial_state" class="new-calculation-step" style="display: none;">
  <div class="panel panel-default">
    <div class="panel-heading">
      <h3 class="panel-title">Initial state</h3>
    </div>

    <div class="progress">
      <div class="progress-bar" role="progressbar" aria-valuenow="70" aria-valuemin="0" aria-valuemax="100" style="width: 70%;">
          Setup progress
      </div>
    </div>

    <div class="panel-body">

      <h4>Initial state - base state</h4>
      <p>Choose the initial state \( | \psi \rangle_{\mathrm{base}} \) you want to evolve from. You can choose from the following given states, and optionally you can apply transformations by applying operators below. </p>

      <div id="new_calculation_available_initial_base_states">

        <p class="bg-info">Loading initial states...</p>

      </div>


      <hr>

      <h4>Initial state - transformation</h4>

      <p>Now choose a transformation to tailor your initial state (optional).
      You can apply multiple system-wide operators \( \hat{O}_k \) to the initial state, which will be applied in the order they are specified below.
      i.e. \( | \psi \rangle_{\mathrm{start}} = \hat{O}_m\cdots\hat{O}_2\hat{O}_1| \psi \rangle_{\mathrm{base}} \) where \( m \) operators have been applied.</p>
      
      <p>Each system wide operator \( \hat{O}_k \) is to formed from a single-site operators of your choice, 
      and can be <b>product</b> of terms or a <b>sum</b> of terms (where the latter case is only available when there is no quantum number conservation).</p>

      <div class="panel panel-default">

        <div class="panel-body">

            <div class="row">

                <div class="col-md-6">

                    <p id="initial_state_modifier_explain_text_sum">If you choose a <b>sum</b> of terms, the chosen operators will be used to form the total site-wide operator as 
                    \[ 
                    \hat{O}_k = \sum_{j=0}^{L-1}\sum_o^{n_o}f_{o}(j)\hat{o}_{j},
                    \]
                    where there are \( n_o \) on-site terms \( \hat{o} \), and where \( f_{o}(j) \) is the chosen spatial function for the onsite term \( \hat{o} \).
                    </p>

                </div>

                <div class="col-md-6">

                    <p id="initial_state_modifier_explain_text_product" style="">If you choose a <b>product</b> of terms, the chosen operators will be used to form the total site-wide operator as 
                    \[ 
                    \hat{O} = \prod_{j=0}^{L-1}\prod_o^{n_o}\hat{o}_{j}^{f_{o}(j)},
                    \]
                    where there are \( n_o \) on-site terms \( \hat{o} \), and where \( f_{o}(j) \) is the chosen spatial function for the onsite term \( \hat{o} \). 
                    For all operators apart from the spin flip, the function \( f_{o}(j) \) will take positive integer values only.
                    Note the operators will be applied to the base state in the order that they are chosen.
                    </p>

                </div>

            </div>

        </div>

      </div>

      <div class="well">
        <form class="form-inline" role="form">

            <div class="checkbox">
                <label>
                <input type="checkbox" id="renormalise_after_initial_state_modifiers_choice"> Renormalise wave function after applying modifiers
                </label>
            </div>

        </form>
      </div>

      <span id="ground_hamiltonian_tex_str" class="hamiltonian_tex_str">Testing look</span>

	  <div class="row">

        <div class="col-md-3">
            <button
            type="button" 
            id="add_product_modifier"
            class="btn btn-default form-control hamiltonian-operator-btn add-product-or-sum-modifier-btn"
            data-sum-product="product">
            <i class="fa fa-times-circle fa-3x"></i> 
            Add a product modifier
            <br>
            </button>
        </div>

        <div class="col-md-3">
            <button
            type="button" 
            id="add_sum_modifier"
            class="btn btn-default form-control hamiltonian-operator-btn add-product-or-sum-modifier-btn"
            data-sum-product="sum">
            <i class="fa fa-plus-circle fa-3x"></i> 
            Add a sum modifier
            </button>
        </div>

	  </div>

      <hr>

      <div id="initial_state_modifier_container">

      </div>


      <hr>

      <div class="row new-calculation-step-navigation">
          <div class="col-md-6">
              <button type="button" class="btn btn-default btn-back-step form-control ">Back</button>
          </div>

          <div class="col-md-6">
              <button type="button" class="btn btn-success btn-next-step form-control ">Next</button>
          </div>
      </div>
    </div>
  </div>
</div>
<!-- End of initial state specification -->

