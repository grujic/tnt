{% verbatim %}

<script id="spatial-function-input-template" type="text/x-handlebars-template"> 

  <div id="spatial_function_input_skeleton_row" class="row">

    <!-- Spatial function stuff -->

    <div class="col-md-1"></div>

    <div class="col-md-5">

        <div class="row">

            <h4>Spatial function</h4>

            <select class="spatial-function-btn-group form-control">
                {{#all_spatial_function_info.all_spatial_functions.fns}}
                    <option value="{{id}}" class="spatial-fn-choice" data-spatial-function-id="{{id}}">
                    {{function_description}}
                    </option>
                {{/all_spatial_function_info.all_spatial_functions.fns}}
            </select>

        </div>

        <div class="row">

            <div class="spatial_function_parameter_input_form">

                {{subrender-spatial-function-form all_spatial_function_info.default_spatial_function}}

            </div>

        </div>

    </div>

    <div class="col-md-1"></div>

    <!-- Now temporal function stuff -->

    <div class="col-md-5">

        <div class="row">

            <h4>Temporal function</h4>

            <select class="temporal form-control">
                {{#all_temporal_function_info.all_temporal_functions.fns}}
                    <option value="{{id}}" class="spatial-fn-choice" data-spatial-function-id="{{id}}">
                    {{function_description}}
                    </option>
                {{/all_spatial_function_info.all_spatial_functions.fns}}
            </select>

        </div>

        <div class="row">

            <div class="spatial_function_parameter_input_form">

                {{subrender-spatial-function-form all_spatial_function_info.default_spatial_function}}

            </div>

        </div>

    </div>

  </div>

</script>

<script id="spatial-function-parameter-input-template" type="text/x-handlebars-template"> 

  <p>\[ {{function_tex_str}} \] </p>
  <form class="form-horizontal" role="form">
    {{#parameters}}
      <div class="form-group">
          <label for="inputEmail3" class="col-sm-2 control-label">\({{parameter_tex_str}}\)</label>
        <div class="col-sm-10">
            <input type="number" class="form-control" id="parameter_{{parameter_id}}" data-parameter-id="{{parameter_id}}" placeholder="{{#if value}}{{value}}{{else}}{{parameter_default_value}}{{/if}}" value="{{#if value}}{{value}}{{else}}{{parameter_default_value}}{{/if}}">
        </div>
      </div>
    {{/parameters}}
  </form>

</script>


<script>

    Handlebars.registerHelper("spatial_function_input", function(spatial_function) {

        var source = $("#spatial-function-input-template").html();
        var template = Handlebars.compile(source);

        return new Handlebars.SafeString(
        template({
                'all_spatial_function_info': {
                    'all_spatial_functions': window.spatial_fns, 
                    'default_spatial_function': spatial_function
                }
            })
        );

    });

    Handlebars.registerHelper("subrender-spatial-function-form", function(spatial_function) {
        var template = Handlebars.compile($("#spatial-function-parameter-input-template").html());
        return new Handlebars.SafeString(template(spatial_function));
    })


</script>

<script id="hamiltonian-term-template" type="text/x-handlebars-template"> 

<div id="hamiltonian-term-{{uuid}}" data-hamiltonian-term-id="{{uuid}}" data-hamiltonian-operator-id="{{operator_id}}" class="row hamiltonian-term">  <!-- A Hamiltonian term representation -->
  <div class="col-md-1" style="padding-top: 70px;">
    <i class="fa fa-plus-circle fa-5x"></i> 
  </div>

  <div class="col-md-11">

    <div class="panel panel-default alert alert-dismissible">
      <div class="panel-body">

        <div class="row">

          <div class="col-md-3">
            <h3>{{function_description}}</h3>
            <p>\[ {{function_tex_str}} \]</p>
            <button type="button" class="btn btn-danger form-control remove-hamiltonian-term-btn">Remove</button>
          </div>

          <div class="col-md-9">

            {{spatial_function_input spatial_function}}

          </div>  <!-- End of spatial definitions box -->

        </div>  <!-- End of row -->

      </div>  <!-- End of panel body -->

    </div>  <!-- End of panel -->

  </div>

</div>  <!-- End of A Hamiltonian term representation -->

</script>

{% endverbatim %}
